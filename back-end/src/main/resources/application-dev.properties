# Development Environment Configuration
# This profile is for local development only

# Server Configuration
server.port=${SERVER_PORT:8080}

# SSL/TLS Configuration (Optional in development)
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEYSTORE:file:certs/keystore.p12}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD:changeit}
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=${SSL_KEY_ALIAS:oscal-dev}
# HTTP port (when SSL is enabled, this port redirects to HTTPS)
server.http.port=${HTTP_PORT:8080}
server.ssl.redirect-http=${SSL_REDIRECT_HTTP:false}

# CORS Configuration (Permissive for development)
cors.allowed-origins=http://localhost:3000,http://localhost:3001
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# H2 Database Configuration (Development only)
spring.datasource.url=jdbc:h2:file:./data/oscal-history-dev
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
# Development database password (override with environment variable for security)
spring.datasource.password=${DB_PASSWORD:dev-password-change-me}

# H2 Console (Enabled for development)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# JWT Configuration
# IMPORTANT: Use environment variable JWT_SECRET for production
# Default development secret (not secure - for development only)
jwt.secret=${JWT_SECRET:dev-secret-key-only-for-development-do-not-use-in-production-minimum-256-bits}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Logging (Verbose for development)
logging.level.root=INFO
logging.level.gov.nist.oscal=DEBUG
logging.level.org.springframework.security=DEBUG

# Swagger/OpenAPI (Enabled without auth in development)
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true

# File Upload Limits
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Security Headers (Disabled in development)
security.headers.enabled=${SECURITY_HEADERS_ENABLED:false}
security.headers.require-https=false
security.headers.hsts.enabled=false
security.headers.csp.enabled=false
security.headers.frame-options.policy=SAMEORIGIN

# Rate Limiting (Disabled by default in development, enable for testing)
rate.limit.enabled=${RATE_LIMIT_ENABLED:false}
rate.limit.login.attempts=5
rate.limit.login.duration=60
rate.limit.registration.attempts=3
rate.limit.registration.duration=3600
rate.limit.api.requests=100
rate.limit.api.duration=60

# Azure Blob Storage (Optional in dev)
azure.storage.connection-string=${AZURE_STORAGE_CONNECTION_STRING:}
azure.storage.container-name=${AZURE_STORAGE_CONTAINER_NAME:oscal-files-dev}
azure.storage.library-container-name=${AZURE_STORAGE_LIBRARY_CONTAINER_NAME:oscal-library-dev}
azure.storage.build-container-name=${AZURE_STORAGE_BUILD_CONTAINER_NAME:oscal-build-storage-dev}
